#pragma once                                 // Предотвращаем повторное включение заголовка
//
class PIDController {                         // Класс, реализующий PID-регулятор
public:                                      // Публичные методы
  void setCoeffs(double p, double i, double d);  // Задание коэффициентов PID
  void setSetpoint(double s);                    // Установка желаемого значения процесса
  int  compute(double pv);                       // Расчёт управляющего воздействия по текущему значению
//
private:                                     // Приватные данные, хранящие состояние регулятора
  double kp = 1.0;                           // Пропорциональная составляющая по умолчанию
  double ki = 0.0;                           // Интегральная составляющая по умолчанию
  double kd = 0.0;                           // Дифференциальная составляющая по умолчанию
  double set = 0.0;                          // Текущая уставка
  double integral = 0.0;                     // Накопленная интегральная ошибка
  double prev = 0.0;                         // Ошибка предыдущего шага
  unsigned long last_ms = 0;                 // Время последнего вычисления
};                                           // Конец определения класса PIDController

